<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Content-Centric Networking in Java: org.ccnx.ccn.profiles.context.ServiceDiscoveryProfile Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>org</b>.<b>ccnx</b>.<b>ccn</b>.<b>profiles</b>.<b>context</b>.<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1context_1_1_service_discovery_profile.html">ServiceDiscoveryProfile</a>
  </div>
</div>
<div class="contents">
<h1>org.ccnx.ccn.profiles.context.ServiceDiscoveryProfile Class Reference</h1><!-- doxytag: class="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile" --><!-- doxytag: inherits="org::ccnx::ccn::profiles::CCNProfile" -->
<p>The ServiceDiscovery protocol aids in finding data about local (same-machine) and nearby (network neighborhood) services.  
<a href="#_details">More...</a></p>

<p><a href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1context_1_1_service_discovery_profile-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Static Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a36ff98b7f781aedf6689f9087029b248"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::localhostScopeName" ref="a36ff98b7f781aedf6689f9087029b248" args="()" -->
static final <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>localhostScopeName</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1169322129e63198868559077ea8c34b"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::localServiceName" ref="a1169322129e63198868559077ea8c34b" args="(String service)" -->
static <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>localServiceName</b> (String service)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a2864d86ce714e085e03b283859c148a7"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::getLocalServiceName" ref="a2864d86ce714e085e03b283859c148a7" args="(ContentName nameWithServicePrefix)" -->
static String&nbsp;</td><td class="memItemRight" valign="bottom"><b>getLocalServiceName</b> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a> nameWithServicePrefix)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static ArrayList&lt; <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1context_1_1_service_discovery_profile.html#a8099f3a2ab67b27c8373c9387e04a141">getLocalServiceKeys</a> (String service, long timeout, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a> handle)  throws IOException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">We want to get a list of local implementors of this service and their keys; until the timeout.  <a href="#a8099f3a2ab67b27c8373c9387e04a141"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_public_key_object.html">PublicKeyObject</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1context_1_1_service_discovery_profile.html#a0f4d1f5c540e07a430d89c72d09ca92d">getLocalServiceKey</a> (String service, long timeout, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a> handle)  throws IOException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Query for local service keys when we believe there is only a single instance of a service.  <a href="#a0f4d1f5c540e07a430d89c72d09ca92d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac3e2057aa6303cd6da1db99e8918c10c"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::publishLocalServiceKey" ref="ac3e2057aa6303cd6da1db99e8918c10c" args="(String service, PublisherPublicKeyDigest serviceKey, KeyManager keyManager)" -->
static void&nbsp;</td><td class="memItemRight" valign="bottom"><b>publishLocalServiceKey</b> (String service, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_publisher_public_key_digest.html">PublisherPublicKeyDigest</a> serviceKey, <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_key_manager.html">KeyManager</a> keyManager)  throws InvalidKeyException, IOException </td></tr>
<tr><td colspan="2"><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6f023f3857fe7762a026ef274ba1b3e5"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::STRING_LOCALHOST" ref="a6f023f3857fe7762a026ef274ba1b3e5" args="" -->
static final String&nbsp;</td><td class="memItemRight" valign="bottom"><b>STRING_LOCALHOST</b> = &quot;localhost&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1_command_marker.html">CommandMarker</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>LOCALHOST_SCOPE</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static final <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1_command_marker.html">CommandMarker</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>SERVICE_NAME_COMPONENT_MARKER</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a633413cc5771d1dc17387b0af18d1dda"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::SCOPE_COMPONENT" ref="a633413cc5771d1dc17387b0af18d1dda" args="" -->
static final int&nbsp;</td><td class="memItemRight" valign="bottom"><b>SCOPE_COMPONENT</b> = 0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a42f95904a558a22b96f7fc29e3f6ad41"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::SERVICE_MARKER_COMPONENT" ref="a42f95904a558a22b96f7fc29e3f6ad41" args="" -->
static final int&nbsp;</td><td class="memItemRight" valign="bottom"><b>SERVICE_MARKER_COMPONENT</b> = 1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7d03bdccc8fe8f3ba315e876eec066ff"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::SERVICE_NAME_COMPONENT" ref="a7d03bdccc8fe8f3ba315e876eec066ff" args="" -->
static final int&nbsp;</td><td class="memItemRight" valign="bottom"><b>SERVICE_NAME_COMPONENT</b> = 3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a389ce4f17b5109b7c2b59adf2c05306c"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::CCND_SERVICE_NAME" ref="a389ce4f17b5109b7c2b59adf2c05306c" args="" -->
static final String&nbsp;</td><td class="memItemRight" valign="bottom"><b>CCND_SERVICE_NAME</b> = &quot;ccnd&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad4c542e4381a02c24ac2e6da5d9301e8"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::REPOSITORY_SERVICE_NAME" ref="ad4c542e4381a02c24ac2e6da5d9301e8" args="" -->
static final String&nbsp;</td><td class="memItemRight" valign="bottom"><b>REPOSITORY_SERVICE_NAME</b> = &quot;repository&quot;</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>The ServiceDiscovery protocol aids in finding data about local (same-machine) and nearby (network neighborhood) services. </p>
<p>We start by retrieving service keys, using: /C1.M.S.localhost/C1.M.SRV/&lt;servicename&gt;/KEY/ and getting as an answer an encoded, self-signed key published under the <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1security_1_1_key_profile.html#a28e9f887a932fd2a2b25264a8687ee1d" title="This creates a ContentName whose last component represents the digest of a public...">KeyProfile.keyName()</a> of that service's key under that prefix. </p>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a0f4d1f5c540e07a430d89c72d09ca92d"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::getLocalServiceKey" ref="a0f4d1f5c540e07a430d89c72d09ca92d" args="(String service, long timeout, CCNHandle handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1content_1_1_public_key_object.html">PublicKeyObject</a> org.ccnx.ccn.profiles.context.ServiceDiscoveryProfile.getLocalServiceKey </td>
          <td>(</td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>service</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throws IOException <code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Query for local service keys when we believe there is only a single instance of a service. </p>
<p>Returns as soon as it gets a first response, or on timeout. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>service</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>timeout</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handle</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd></dd></dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8099f3a2ab67b27c8373c9387e04a141"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::getLocalServiceKeys" ref="a8099f3a2ab67b27c8373c9387e04a141" args="(String service, long timeout, CCNHandle handle)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static ArrayList&lt;<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_object.html">ContentObject</a>&gt; org.ccnx.ccn.profiles.context.ServiceDiscoveryProfile.getLocalServiceKeys </td>
          <td>(</td>
          <td class="paramtype">String&nbsp;</td>
          <td class="paramname"> <em>service</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">long&nbsp;</td>
          <td class="paramname"> <em>timeout</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&nbsp;</td>
          <td class="paramname"> <em>handle</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td>  throws IOException <code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>We want to get a list of local implementors of this service and their keys; until the timeout. </p>
<p>We use excludes to get all of them within the timeout. We get whole keys because they're usually a single object, so there is no reason not to load them. Rather than decoding them all, though, we just hand back the CO to the caller to decide what to do.</p>
<p>Start by taking a timeout to use as the inter-response interval; if we haven't heard anything in that long, we stop. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>service</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>serviceKey</em>&nbsp;</td><td></td></tr>
    <tr><td valign="top"></td><td valign="top"><em>keyManager</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Data Documentation</h2>
<a class="anchor" id="a57659195705fbe07ce2ab12d4753ae22"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::LOCALHOST_SCOPE" ref="a57659195705fbe07ce2ab12d4753ae22" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1_command_marker.html">CommandMarker</a> org.ccnx.ccn.profiles.context.ServiceDiscoveryProfile.LOCALHOST_SCOPE<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment">
                CommandMarker.commandMarker(CommandMarker.COMMAND_MARKER_SCOPE, STRING_LOCALHOST)
</pre></div>
</div>
</div>
<a class="anchor" id="a49cea4a0b28bab9de07e8cc0a9f23e83"></a><!-- doxytag: member="org::ccnx::ccn::profiles::context::ServiceDiscoveryProfile::SERVICE_NAME_COMPONENT_MARKER" ref="a49cea4a0b28bab9de07e8cc0a9f23e83" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">final <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1_command_marker.html">CommandMarker</a> org.ccnx.ccn.profiles.context.ServiceDiscoveryProfile.SERVICE_NAME_COMPONENT_MARKER<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<b>Initial value:</b><div class="fragment"><pre class="fragment"> 
                CommandMarker.commandMarker(CommandMarker.MARKER_NAMESPACE, <span class="stringliteral">&quot;SRV&quot;</span>)
</pre></div>
</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/org/ccnx/ccn/profiles/context/ServiceDiscoveryProfile.java</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Thu Nov 4 13:34:29 2010 for Content-Centric Networking in Java by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
