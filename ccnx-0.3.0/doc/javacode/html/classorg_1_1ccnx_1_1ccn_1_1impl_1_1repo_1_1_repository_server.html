<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Content-Centric Networking in Java: org.ccnx.ccn.impl.repo.RepositoryServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
  <div class="navpath"><b>org</b>.<b>ccnx</b>.<b>ccn</b>.<b>impl</b>.<b>repo</b>.<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html">RepositoryServer</a>
  </div>
</div>
<div class="contents">
<h1>org.ccnx.ccn.impl.repo.RepositoryServer Class Reference</h1><!-- doxytag: class="org::ccnx::ccn::impl::repo::RepositoryServer" -->
<p>High level implementation of repository protocol that can be used by any application to provide repository service.  
<a href="#_details">More...</a></p>

<p><a href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server-members.html">List of all members.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>InterestTimer</b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><b>NameAndListener</b></td></tr>
<tr><td colspan="2"><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aa22f89158895674116b554304017b253">RepositoryServer</a> (<a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html">RepositoryStore</a> repo)  throws IOException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Constructor.  <a href="#aa22f89158895674116b554304017b253"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afb8284e861eec28e74b8ca97670c7007"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::start" ref="afb8284e861eec28e74b8ca97670c7007" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#afb8284e861eec28e74b8ca97670c7007">start</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Start serving requests from the network. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa774979825f3fac5c0bd81f32838ac24"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::shutDown" ref="aa774979825f3fac5c0bd81f32838ac24" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aa774979825f3fac5c0bd81f32838ac24">shutDown</a> ()</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Stop serving requests. <br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#a9a1a4174f3a9334c0f32b0d63bc667ea">resetNameSpaceFromHandler</a> ()  throws IOException </td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">In general we need to wait until all sessions are complete before making a namespace change because it involves changing the filter which could cut off current sessions in process.  <a href="#a9a1a4174f3a9334c0f32b0d63bc667ea"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a266fb5a4a9ac76727cfc97655e83faaa"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getHandle" ref="a266fb5a4a9ac76727cfc97655e83faaa" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1_c_c_n_handle.html">CCNHandle</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>getHandle</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a64136f40f14096a35a397699b8fc6b34"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getRepository" ref="a64136f40f14096a35a397699b8fc6b34" args="()" -->
<a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html">RepositoryStore</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>getRepository</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a92da13e1c23e81135135b588babcbe5c"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getExcludes" ref="a92da13e1c23e81135135b588babcbe5c" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_exclude.html">Exclude</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>getExcludes</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a10dd45700fb6fd5be9073afdca7e4527"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getWriter" ref="a10dd45700fb6fd5be9073afdca7e4527" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1io_1_1_c_c_n_writer.html">CCNWriter</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>getWriter</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af7c423ebf9f8ebcc8cdcd2187e45864e"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getDataListeners" ref="af7c423ebf9f8ebcc8cdcd2187e45864e" args="()" -->
ArrayList&lt; <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_data_listener.html">RepositoryDataListener</a> &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>getDataListeners</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab947f120d6ef5b3fc0debb5a70c3b5bf"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getFilters" ref="ab947f120d6ef5b3fc0debb5a70c3b5bf" args="()" -->
ArrayList&lt; NameAndListener &gt;&nbsp;</td><td class="memItemRight" valign="bottom"><b>getFilters</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8bfc009a03936d6d70158548685b6dd4"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::addListener" ref="a8bfc009a03936d6d70158548685b6dd4" args="(RepositoryDataListener listener)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>addListener</b> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_data_listener.html">RepositoryDataListener</a> listener)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac828b61a0012363f38499d2c712f659e"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getPendingNameSpaceState" ref="ac828b61a0012363f38499d2c712f659e" args="()" -->
boolean&nbsp;</td><td class="memItemRight" valign="bottom"><b>getPendingNameSpaceState</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abcf63b98d926eddf1e6031eb35934679"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getDataHandler" ref="abcf63b98d926eddf1e6031eb35934679" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_data_handler.html">RepositoryDataHandler</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>getDataHandler</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a90bd76637705aac7c68a006c8cfbee8a"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getWindowSize" ref="a90bd76637705aac7c68a006c8cfbee8a" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>getWindowSize</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab165554e22db0b8a87bc9bbbef3b1a55"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getFreshness" ref="ab165554e22db0b8a87bc9bbbef3b1a55" args="()" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>getFreshness</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a884812828c23a2ec4d5b02e1a32553cd"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getResponseName" ref="a884812828c23a2ec4d5b02e1a32553cd" args="()" -->
<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1protocol_1_1_content_name.html">ContentName</a>&nbsp;</td><td class="memItemRight" valign="bottom"><b>getResponseName</b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#aa02fcf23bf18c75dec07a1db0658e2d4">sendEnumerationResponse</a> (<a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a> ner)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Method to write out name enumeration responses.  <a href="#aa02fcf23bf18c75dec07a1db0658e2d4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ade2db41dc893345127e4e1941e0377eb"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::getStatus" ref="ade2db41dc893345127e4e1941e0377eb" args="(String type)" -->
Object&nbsp;</td><td class="memItemRight" valign="bottom"><b>getStatus</b> (String type)</td></tr>
<tr><td colspan="2"><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a1a218b3d5514530d91e558c587f09ea6"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::PERIOD" ref="a1a218b3d5514530d91e558c587f09ea6" args="" -->
static final int&nbsp;</td><td class="memItemRight" valign="bottom"><b>PERIOD</b> = 2000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a335da0bb355bd989ce5212586b4e1083"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::THREAD_LIFE" ref="a335da0bb355bd989ce5212586b4e1083" args="" -->
static final int&nbsp;</td><td class="memItemRight" valign="bottom"><b>THREAD_LIFE</b> = 8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a3d1f13e92af1149758e768b339f867e7"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::WINDOW_SIZE" ref="a3d1f13e92af1149758e768b339f867e7" args="" -->
static final int&nbsp;</td><td class="memItemRight" valign="bottom"><b>WINDOW_SIZE</b> = 4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a114276e2d19c8c73d7364dbf1ffa7de9"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::FRESHNESS" ref="a114276e2d19c8c73d7364dbf1ffa7de9" args="" -->
static final int&nbsp;</td><td class="memItemRight" valign="bottom"><b>FRESHNESS</b> = 4</td></tr>
<tr><td colspan="2"><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="afd4aa4977a00a1b4ec15f16b6cb76a50"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::_periodicTimer" ref="afd4aa4977a00a1b4ec15f16b6cb76a50" args="" -->
Timer&nbsp;</td><td class="memItemRight" valign="bottom"><b>_periodicTimer</b> = null</td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<p>High level implementation of repository protocol that can be used by any application to provide repository service. </p>
<p>The application must supply a <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports...">RepositoryStore</a> instance to take care of actual storage and retrieval, which might use persistent storage or application data structures.</p>
<p>Some notes: We use a policy file to decide which namespaces to save. The policy file is currently parsed within the lower level.</p>
<p>We can't just express an interest in anything that's within the namespaces that we want to save within, because we will keep getting back the same content over and over again if we do that. Instead the clients trigger a write to the repository by expressing an interest in contentName + "write_marker" (CCNBase.REPO_START_WRITE). When we see this we write back some information then express an interest in the contentName without the "write_marker" to get the initial block, then express interest in blocks after the initial block for this particular write. </p>
<hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="aa22f89158895674116b554304017b253"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::RepositoryServer" ref="aa22f89158895674116b554304017b253" args="(RepositoryStore repo)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">org.ccnx.ccn.impl.repo.RepositoryServer.RepositoryServer </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html">RepositoryStore</a>&nbsp;</td>
          <td class="paramname"> <em>repo</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throws IOException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Constructor. </p>
<p>Note that merely creating an instance does not begin service of requests from the network. For that you must call <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html#afb8284e861eec28e74b8ca97670c7007" title="Start serving requests from the network.">start()</a>. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>repo</em>&nbsp;</td><td>the <a class="el" href="interfaceorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_store.html" title="A RepositoryStore stores ContentObjects for later retrieval by Interest and supports...">RepositoryStore</a> instance to use for backing storage. The <a class="el" href="classorg_1_1ccnx_1_1ccn_1_1impl_1_1repo_1_1_repository_server.html" title="High level implementation of repository protocol that can be used by any application...">RepositoryServer</a> uses repo.getHandle() to get the handle to use for communication, to make sure that it is sending messages under the identity of the repo. </td></tr>
  </table>
  </dd>
</dl>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9a1a4174f3a9334c0f32b0d63bc667ea"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::resetNameSpaceFromHandler" ref="a9a1a4174f3a9334c0f32b0d63bc667ea" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.ccnx.ccn.impl.repo.RepositoryServer.resetNameSpaceFromHandler </td>
          <td>(</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>  throws IOException </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>In general we need to wait until all sessions are complete before making a namespace change because it involves changing the filter which could cut off current sessions in process. </p>
<dl><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>IOException</em>&nbsp;</td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aa02fcf23bf18c75dec07a1db0658e2d4"></a><!-- doxytag: member="org::ccnx::ccn::impl::repo::RepositoryServer::sendEnumerationResponse" ref="aa02fcf23bf18c75dec07a1db0658e2d4" args="(NameEnumerationResponse ner)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void org.ccnx.ccn.impl.repo.RepositoryServer.sendEnumerationResponse </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classorg_1_1ccnx_1_1ccn_1_1profiles_1_1nameenum_1_1_name_enumeration_response.html">NameEnumerationResponse</a>&nbsp;</td>
          <td class="paramname"> <em>ner</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Method to write out name enumeration responses. </p>
<p>This is called directly to respond to incoming name enumeration interests and can also be called when a content object is saved in the repo and the interest flag is set by a previous name enumeration interest where there was not new information available.</p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>ner</em>&nbsp;</td><td>NameEnumerationResponse object to send out</td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>void </dd></dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/org/ccnx/ccn/impl/repo/RepositoryServer.java</li>
</ul>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Thu Nov 4 13:34:27 2010 for Content-Centric Networking in Java by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
